{% extends "_layout.html" %}
{% block content %}
<h1>Cart</h1>
{% if not items %}
<p>Your cart is empty.</p>
{% else %}
<table border="1" cellpadding="6" cellspacing="0">
    <tr>
        <th>Name</th>
        <th>Qty</th>
        <th>Unit</th>
        <th>Line Total</th>
        <th></th>
    </tr>
    {% for it in items %}
    <tr>
        <td>{{ it.name }}</td>
        <td>{{ it.qty }}</td>
        <td>{{ "%.2f"|format(it.unit_price) }}</td>
        <td>{{ "%.2f"|format(it.line_total) }}</td>
        <td>
            <form method="post" action="{{ url_for('cart_remove') }}">
                <input type="hidden" name="product_id" value="{{ it.product_id }}">
                <button type="submit">Remove</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

<p><strong>Subtotal:</strong> {{ "%.2f"|format(totals.subtotal) }} |
    <strong>Total:</strong> {{ "%.2f"|format(totals.total) }}
</p>

<form method="get" action="{{ url_for('checkout') }}">
    <button type="submit">Proceed to checkout</button>
</form>

<form method="post" action="{{ url_for('cart_clear') }}">
    <button type="submit">Clear cart</button>
</form>
{% endif %}
{% endblock %}